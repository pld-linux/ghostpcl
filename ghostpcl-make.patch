--- ghostpcl_1.38p1/gs/src/ugcclib.mak.orig	2002-06-13 01:18:14.000000000 +0200
+++ ghostpcl_1.38p1/gs/src/ugcclib.mak	2003-12-25 18:26:48.504185696 +0100
@@ -67,10 +67,7 @@
 GCFLAGS_WARNINGS=-Wall -Wcast-qual -Wpointer-arith -Wstrict-prototypes -Wwrite-strings
 GCFLAGS=$(GCFLAGS_NO_WARN) $(GCFLAGS_WARNINGS)
 XCFLAGS=
-CFLAGS_STANDARD=-O2
-CFLAGS_DEBUG=-g -O
-CFLAGS_PROFILE=-pg -O2
-CFLAGS=$(CFLAGS_DEBUG) $(GCFLAGS) $(XCFLAGS)
+CFLAGS=$(OPTFLAGS) $(GCFLAGS) $(XCFLAGS)
 LDFLAGS=$(XLDFLAGS)
 STDLIBS=-lm
 EXTRALIBS=
--- ghostpcl_1.38p1/main/pcl6_gcc.mak.orig	2002-11-22 22:20:25.000000000 +0100
+++ ghostpcl_1.38p1/main/pcl6_gcc.mak	2003-12-25 18:28:49.802745512 +0100
@@ -16,7 +16,7 @@
 ZSRCDIR?=../gs/zlib
 ZGENDIR?=$(GENDIR)
 ZOBJDIR?=$(GENDIR)
-SHARE_ZLIB?=0
+SHARE_ZLIB?=1
 SHARE_LIBPNG?=0
 
 PNGSRCDIR?=../gs/libpng
@@ -99,7 +99,7 @@
 
 GCFLAGS?=-Wall -Wpointer-arith -Wstrict-prototypes -Wwrite-strings -DNDEBUG  $(HAVE_STDINT_H_DEFINE) $(HAVE_MKSTEMP_DEFINE) $(GX_COLOR_INDEX_DEFINE)
 # CFLAGS?=-g -O0 $(GCFLAGS) $(XCFLAGS)
-CFLAGS?= $(GCFLAGS) $(XCFLAGS)
+CFLAGS?=$(OPTFLAGS) $(GCFLAGS) $(XCFLAGS)
 
 XINCLUDE?=-I/usr/X11R6/include
 XLIBDIRS?=-L/usr/X11R6/lib
@@ -207,7 +207,7 @@
 
 SYNC=posync
 # some systems may need -ldl as well as pthread
-STDLIBS=-lm -lpthread -ldl
+STDLIBS=-lm -lpthread -ldl -lz
 DEVICE_DEVS=$(DD)x11.dev $(DD)x11alpha.dev $(DD)x11mono.dev $(DD)x11cmyk.dev $(DEVICES_DEVS) $(DD)bmpamono.dev $(DD)bmpa16m.dev
 endif
 
